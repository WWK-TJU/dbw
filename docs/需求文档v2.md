# 需求文档 v2（草案）

## 1. 背景与目标
- 参考论文：Graph Association Analyses for Early Drug Discovery（MedHunter 系统演示）
- 目标：基于多源生物医学数据构建知识图谱（DDKG），通过图关联规则（GARs）实现
  - 关联发现（DDAs/DDIs/PPIs）
  - 数据清洗与增量更新
  - 可解释的规则推断
- 产出：面向用户的可视化平台，支持本体生成与属性图构建两类核心页面。

## 2. 范围
### 2.1 需求内
- 平台 Web 界面与交互（含任务式操作流）
- DDKG 数据接入、融合、清洗、增量更新
- GAR/GCR 规则发现、执行、可视化
- 应用场景：DDAs、DDIs、PPIs 的任务模板与结果展示

### 2.2 需求外（待确认）
- 论文中提及的 ML 模型训练与部署
- 大规模分布式计算与资源调度
- 生产环境多租户与审计

## 3. 角色与使用场景
- 研究员：发起关联发现任务，查看推断结果与解释
- 数据工程师：接入数据源、配置增量更新与清洗规则
- 标注/审核人员：人机协同清洗、确认修复建议

典型场景：
- 选择疾病，寻找候选药物（DDAs）
- 选择药物，发现潜在药物-药物相互作用（DDIs）
- 基于蛋白图谱推断 PPI（PPIs）
- 从外部库增量导入数据并自动融合

## 4. 总体功能概览
平台为任务驱动型，顶部导航入口三大模块：
1) 数据与知识图谱（构建/更新/清洗）
2) 规则与推断（GAR/GCR）
3) 应用与结果（DDAs/DDIs/PPIs）

## 5. 功能需求

### 5.1 系统平台界面（首页/导航）
- 顶部导航条：入口为「数据构建」「规则推断」「应用分析」
- 任务列表：展示任务名称、状态（运行/完成/失败）、耗时、更新时间
- 任务创建向导：按步骤选择数据源、规则、目标对象、输出维度
- 实时结果区：任务运行中可看到进度与阶段性产出

### 5.2 本体生成页面（Ontology Builder）
目标：将多源数据自动对齐并构建统一知识图谱 DDKG。

功能点：
- 数据源接入：支持配置多个数据源（如 CTD、BioGrid、UniProt 等）
- 异构实体对齐（HER）：配置相似度策略与合并规则
- 图合并与过滤：基于图 join 与图过滤，生成 DDKG
- 增量更新：对外部变更数据 ΔG 做选择性更新
- 图谱预览：展示节点/边规模、类别统计、样例子图
- 版本管理：保留历史版本与差异说明（待确认）

输入：
- 数据源配置（连接/文件/接口）
- 匹配规则或模型参数

输出：
- 统一的 DDKG 图谱
- 生成日志与统计指标

### 5.3 属性图构建页面（Attribute Graph Builder）
目标：面向规则发现与推断，构造属性图、配置谓词与规则。

功能点：
- 图模式编辑：定义图模式（pattern）与变量绑定
- 规则构建：支持 GAR/GCR 的前置条件与结论配置
- 谓词配置：支持关系谓词、属性谓词、2WL 谓词、ML 谓词
- 规则发现：基于图数据挖掘自动发现候选规则
- 规则执行：运行规则并生成推断/修复建议
- 可解释展示：规则条件、匹配图样例、命中率、置信度

输入：
- 目标图谱 DDKG
- 规则模板或挖掘参数

输出：
- 规则集合、推断结果、可解释性展示

### 5.4 数据清洗（GCR）
- 自动发现 GCR 规则
- 标注/确认流程：提示修复建议，允许用户确认或自定义修复
- 记录修复为 Ground Truth，持续提升后续清洗质量

### 5.5 应用场景模板
#### 5.5.1 DDAs（药物-疾病）
- 输入：目标疾病
- 输出：候选药物/基因与证据链
#### 5.5.2 DDIs（药物-药物）
- 输入：目标药物
- 输出：潜在交互药物与解释
#### 5.5.3 PPIs（蛋白-蛋白）
- 输入：蛋白或蛋白集合
- 输出：潜在 PPI 及规则解释

## 6. 非功能需求
### 6.1 性能
- 单机演示参考：16GB RAM / 8 CPU（论文演示环境）
- 规则发现与推断支持并行扩展

### 6.2 可用性
- 任务可中断与重试
- 失败日志与错误定位

### 6.3 安全
- 支持敏感数据脱敏展示
- 任务操作与数据访问权限控制（待确认）

### 6.4 可维护性
- 日志与审计
- 版本化输出与可追溯结果

## 7. 需求待确认
- UI 语言：中文/英文是否可切换
- 任务结果数据导出格式（CSV/JSON/GraphML）
- 规则可视化方式（图谱+文本 / 图谱+卡片）
- 对外数据源接入方式（API/文件/数据库）
- 是否需要内置 PDF 阅读器展示论文/说明（用户已提出）

## 8. 里程碑建议（可选）
- M1：UI 原型 + 任务流程 + DDKG 构建流程
- M2：GAR/GCR 规则引擎 + 规则可视化
- M3：DDAs/DDIs/PPIs 任务模板 + 导出

## 9. 附录：来源摘要
- 论文核心：MedHunter 基于 DDKG 与 GAR/GCR 实现规则推断、数据清洗
- UI 核心：任务式操作流程，实时可视化与导航入口
